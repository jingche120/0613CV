(function(_ds){var window=this;var jX=function(a,b){const c=[];for(const l of a)try{a=c;var d=a.push,e=b;const m=new URL(l),p=_ds.H();if(m.hostname!==p.hostname)throw new iX("Recommendations must be from the same site.");var f=m.pathname,g=new _ds.sq;var h=_ds.Ne(g,1,f);var k=_ds.qb(h,e.toString());d.call(a,k)}catch(m){if(m instanceof iX)console.warn("Link is off-site, not recommending.",l);else throw m;}return c};var kX=function(a){var b=a.Dm,c=a.Ll,d=a.dm;a='<h2 class="significatio-heading no-link">'+_ds.S(a.Ag)+"</h2>";""!=b?(a=a+'<div class="info-container"><button type="button" class="button-flat info-button significatio-info-container" id="significatio-info-button" aria-label="'+_ds.DC("\u77ad\u89e3\u5efa\u8b70\u7684\u5167\u5bb9"),a=a+'" data-title="'+_ds.DC("\u77ad\u89e3\u5efa\u8b70\u7684\u5167\u5bb9"),a+='"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="significatio-icon-info"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg></button></div>'):
(a=a+'<div class="significatio-popout-container"><button type="button" class="significatio-popout-toggle button-flat significatio-info-container" id="significatio-popout-toggle" aria-haspopup="true" aria-controls="significatio-popout" aria-label="'+_ds.DC("\u77ad\u89e3\u5efa\u8b70\u7684\u5167\u5bb9"),a=a+'" data-title="'+_ds.DC("\u77ad\u89e3\u5efa\u8b70\u7684\u5167\u5bb9"),a+='"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="significatio-icon-info"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg></button><div class="significatio-popout" id="significatio-popout" aria-labelledby="significatio-popout-toggle" hidden><h4 class="significatio-popout-heading">\u95dc\u65bc\u9019\u4e9b\u5efa\u8b70</h4><p>\u9019\u4e9b\u5efa\u8b70\u80fd\u5354\u52a9\u4f60\u627e\u5230\u6240\u9700\u5167\u5bb9\u3002\u4e3b\u8981\u4f9d\u64da\u70ba\u4f60\u6b63\u5728\u700f\u89bd\u53ca\u5132\u5b58\u65bc\u5e33\u6236\u7684\u9801\u9762\u3002 <a href="https://myactivity.google.com/activitycontrols/webandapp" class="significatio-popout-interactive">\u7db2\u8def\u548c\u61c9\u7528\u7a0b\u5f0f\u6d3b\u52d5</a>.</p><a href="http://go/devsite-recommendations" class="significatio-popout-interactive">\u77ad\u89e3\u8a73\u60c5</a></div></div>');
a+='<div class="significatio-buttons">';d&&(a+='<p class="significatio-internal-only">\u50c5\u4f9b\u5167\u90e8\u4f7f\u7528</p>');""!=c&&(a=a+'<button type="button" class="significatio-issue-button button-flat" id="significatio-issue-button" aria-label="'+_ds.DC("\u56de\u5831\u54c1\u8cea\u4e0d\u4f73\u7684\u5efa\u8b70"),a=a+'" data-title="'+_ds.DC("\u56de\u5831\u54c1\u8cea\u4e0d\u4f73\u7684\u5efa\u8b70"),a+='"><span class="material-icons" aria-hidden="true">bug_report</span></button>');return(0,_ds.R)(a+
"</div>")},lX=function(){return(0,_ds.R)('<div class="significatio-overview"></div><div class="significatio-body"><div class="significatio-recommendations"></div><div class="significatio-loading"><devsite-spinner size="64"></devsite-spinner></div></div>')},nX=function(a){a=a.Va;let b="";const c=a.length;for(let d=0;d<c;d++)b+=mX(a[d]);return(0,_ds.R)(b)},mX=function(a){let b="";var c=[a.getTitle(),_ds.A(a,3),_ds.A(a,4)];b+='<div class="significatio-card"><h3 class="significatio-card-heading no-link"><a href="'+
_ds.W(_ds.X(a.getUrl()+"?"+_ds.A(a,8)))+'" data-category="Site-Wide Custom Events" data-label="devsite-recommendation card link" data-action="click" track-type="recommendations" track-name="cardClick" track-metadata-eventdetail="'+_ds.W(a.getUrl())+'">'+_ds.S(c.filter(d=>0<(""+_ds.sC(d)).length)[0])+'</a></h3><p class="significatio-card-description">'+_ds.S(_ds.yC(_ds.A(a,5)))+'</p><div class="significatio-card-meta">';c='\u66f4\u65b0\u6642\u9593\uff1a<span class="significatio-date" date="'+(_ds.W(_ds.Jb(a,
_ds.TB,7).getSeconds())+'"></span>');b+=c;if(0!=_ds.sC(_ds.Hb(a,_ds.hJ,11)).length){b=b+'<span class="significatio-recommend-popout-container"><button type="button" class="significatio-popout-toggle button-flat significatio-attr-toggle" aria-haspopup="true" aria-controls="significatio-popout" aria-label="'+_ds.DC("\u70ba\u4f55\u986f\u793a\u9019\u9805\u5efa\u8b70\uff1f");b=b+'" data-title="'+_ds.DC("\u70ba\u4f55\u986f\u793a\u9019\u9805\u5efa\u8b70\uff1f");b+='"><i class="material-icons significatio-attr-info">help_outline</i></button><div class="significatio-popout significatio-attr" aria-labelledby="significatio-popout-toggle" hidden><h4 class="significatio-popout-heading">\u70ba\u4f55\u986f\u793a\u9019\u9805\u5efa\u8b70\uff1f</h4><p>\u56e0\u70ba\u4f60\u6700\u8fd1\u770b\u904e ';
a=_ds.Hb(a,_ds.hJ,11);c=a.length;for(let d=0;d<c;d++){const e=a[d];b+=' <a href="'+_ds.W(_ds.X(e.getUrl()))+'" class="significatio-popout-interactive" track-type="recommendations" track-name="attributionLink">'+_ds.S(e.getTitle())+"</a>"}b+=".</p></div></span>"}return(0,_ds.R)(b+"</div></div>")},oX=function(a){var b=a.Bo;a='<div class="significatio-card error">'+(0,_ds.R)('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="significatio-error-icon"><path d="M11 15h2v2h-2v-2zm0-8h2v6h-2V7zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/></svg>')+
'<p class="significatio-card-description">';a+='\u76ee\u524d\u6c92\u6709\u4efb\u4f55\u5efa\u8b70\u3002</p><p class="significatio-card-description">';b='\u5efa\u8b70<a href="#" class="'+(_ds.W(b)+'">\u767b\u5165</a> Google \u5e33\u6236\u3002');return(0,_ds.R)(a+b+"</p></div>")};var pX={"in-page":5},rX=function(a){a.eventHandler.listen(document,"devsite-on-recommendations",b=>{qX(a)?a.T||(b=b.X)&&(null==b?0:b.detail)&&(b=b.detail,5===_ds.ye(b,5,0)?(a.v=b,a.T=!0,a.removeAttribute("hidden"),a.render()):a.j.h()):a.j.h()})},qX=function(a){return!a.R&&document.querySelector("devsite-recommendations:not([yield])")?!1:!0},AX=async function(a,b){var c=[2,5,3];if(!a.M&&c.some(h=>(null==b?void 0:_ds.ye(b,5,0))===h)&&((null==b?0:_ds.pJ(b).length)&&a.dispatchEvent(new CustomEvent("devsite-on-recommendations",
{detail:b,bubbles:!0})),3!==(null==b?void 0:_ds.ye(b,5,0)))){sX(a);return}if(a.display&&pX[a.display]!==(null==b?void 0:_ds.ye(b,5,0)))sX(a);else{c=a.querySelector(".significatio-overview");var d=null==b?void 0:_ds.A(b,6);a.F=(null==b?void 0:_ds.A(b,7))||"";a.D=(null==b?void 0:_ds.A(b,8))||"";var e=1===(null==b?void 0:_ds.ye(b,9,0));c&&d?_ds.M(c,kX,{Ag:d,Dm:a.F,Ll:a.D,dm:e}):await tX(a,!0,!0,"no title");if(null==b?0:_ds.pJ(b).length){_ds.M(a.h,nX,{Va:_ds.pJ(b)});uX(a);(null==b?0:_ds.Hb(b,_ds.rJ,2).length)&&
vX(_ds.Hb(b,_ds.rJ,2));a.C=a.querySelector("#significatio-stats-button");if(null==b?0:_ds.A(b,4)){var f;null==(f=a.C)||f.removeAttribute("hidden");a.J=_ds.A(b,4)}else{let h;null==(h=a.C)||h.setAttribute("hidden","")}if(a.h){f=a.h.querySelectorAll(".significatio-recommend-popout-container");for(var g of f)wX(a,g)}(g=a.querySelector(".significatio-popout-container"))&&wX(a,g);xX(a);yX(a);zX(a);a.removeAttribute("loading");a.j.h()}else await tX(a,!1)}},CX=async function(a){a.setAttribute("loading","");
await _ds.x();a.h&&_ds.Qh(a.h);const b=await BX(a);let c=null;try{c=await _ds.vq(b)}catch(d){await tX(a,!0,!1,"error fetching recommendations");return}a.v=c;await AX(a,c)},tX=async function(a,b=!0,c=!1,d=""){b&&_ds.mj(d);if(c){let e;null==(e=a.parentNode)||e.removeChild(a)}a.j.h();if(await (await _ds.x()).isSignedIn()){let e;null==(e=a.parentNode)||e.removeChild(a)}else _ds.M(a.h,oX,{Bo:"significatio-sign-in"}),zX(a),yX(a),a.removeAttribute("loading")},wX=function(a,b){const c=b.querySelector(".significatio-popout-toggle"),
d=b.querySelector(".significatio-popout");c&&d&&(a.N.push(d),a.eventHandler.listen(d,"focusout",e=>{e.relatedTarget&&(_ds.ii(e.relatedTarget,null,"significatio-popout",6)||a.$b(d))}),a.eventHandler.listen(c,"click",()=>{a.H.get(d)||(d.hasAttribute("active")?a.$b(d):a.Pd(d))}))},BX=async function(a){const b=(await _ds.x()).getTenantId()||0;return _ds.nJ(_ds.mJ(_ds.lJ(_ds.kJ(_ds.uq(b),jX(a.L.map(c=>c.href),b)),jX(a.G.map(c=>c.href),b)),Number(a.getAttribute("generated"))||0),a.query())},sX=function(a){a.j.h();
let b;null==(b=a.parentNode)||b.removeChild(a)},uX=function(a){if(a.h){var b=Array.from(a.h.querySelectorAll(".significatio-date"));for(const c of b)b=c.getAttribute("date"),c.textContent=(new Date(1E3*Number(b))).toLocaleDateString("default",{month:"short",year:"numeric",day:"numeric",timeZone:a.timeZone})}},vX=function(a){for(const b of a)document.body.dispatchEvent(new CustomEvent("devsite-analytics-set-dimension",{bubbles:!0,detail:{name:b.getName(),value:_ds.A(b,2),gaid:_ds.A(b,3)}}))},xX=function(a){var b=
a.querySelector("#significatio-issue-button");b&&a.eventHandler.listen(b,"click",()=>void DX(a));(b=a.querySelector("#significatio-info-button"))&&a.eventHandler.listen(b,"click",()=>void EX(a));a.C&&a.eventHandler.listen(a.C,"click",()=>{a.J&&_ds.$o(a.J,{target:"_blank"})});a.eventHandler.listen(document,"click",c=>{for(const d of a.N)!d.contains(c.target)&&d.hasAttribute("active")&&a.$b(d)})},yX=function(a){a.eventHandler.listen(a,"click",async b=>{_ds.ii(b.target,null,"significatio-sign-in",2)&&
await FX()})},zX=function(a){if(a.h){a=Array.from(a.h.querySelectorAll(".significatio-card:not([show])"));for(const b of a)b.setAttribute("show","")}},FX=async function(){await (await _ds.x()).signIn()},EX=async function(a){a.F&&_ds.$o(a.F,{target:"_blank"})},DX=async function(a){a.D&&_ds.$o(a.D,{target:"_blank"})},GX=class extends _ds.G{constructor(a){super();this.timeZone=a;this.eventHandler=new _ds.I(this);this.R=!0;this.T=this.M=this.V=this.K=!1;this.L=[];this.G=[];this.v=this.h=null;this.display=
"";this.H=new Map;this.N=[];this.C=this.J=null;this.D=this.F="";this.j=new _ds.Ak;this.loaded=this.j.promise;this.Y=new _ds.Ak;this.$=new _ds.Ak}connectedCallback(){this.K=!0;this.L=[...this.querySelectorAll("a[href]")];this.G=[...this.querySelectorAll('link[rel="disallow"][href]')];this.display=this.getAttribute("display");this.getAttribute("display")?"in-page"===this.getAttribute("display")&&(rX(this),this.$.h(),this.M=!0):this.render()}disconnectedCallback(){document.body.dispatchEvent(new CustomEvent("devsite-recommendations-disconnected",
{bubbles:!0}));_ds.J(this.eventHandler);this.L=[];this.G=[]}static get observedAttributes(){return["yield","display"]}attributeChangedCallback(a,b,c){"yield"===a?this.R=null==c:"display"===a&&(this.display=c);this.render()}query(){return this.getAttribute("query")||""}async render(){if(this.K)if(qX(this))if(_ds.M(this,lX),this.h=this.querySelector(".significatio-recommendations")){if(this.v?await AX(this,this.v):await CX(this),!this.V){const b=await _ds.x();try{if(await b.intersectionEnterForElement(this.h),
null!=this.v){var a;for(const c of null==(a=this.v)?void 0:_ds.pJ(a)){const d=_ds.yq(c);if(!d)continue;const e={category:"Site-Wide Custom Events",action:"recommended",label:c.getUrl(),additionalParams:{recommendations:d}};this.dispatchEvent(new CustomEvent("devsite-analytics-observation",{detail:e,bubbles:!0}));const f={eventData:JSON.stringify({type:"recommendations",name:"impression",metadata:d})};this.dispatchEvent(new CustomEvent("devsite-analytics-observation-cloudtrack",{detail:f,bubbles:!0}))}this.Y.h();
this.V=!0}}catch(c){}}}else await tX(this,!0,!1,"no recommendations element");else this.j.h()}async Pd(a){a.removeAttribute("hidden");await _ds.jj();a.setAttribute("active","");let b;null==(b=a.querySelector(".significatio-popout-interactive"))||b.focus()}async $b(a){!this.H.get(a)&&a&&(this.H.set(a,!0),a.removeAttribute("active"),await _ds.jj(),_ds.yk(this.eventHandler,a,"transitionend",()=>{a.setAttribute("hidden","");this.H.set(a,!1)}))}},iX=class extends Error{constructor(a){super(a);Object.setPrototypeOf(this,
iX.prototype)}};try{window.customElements.define("devsite-recommendations",GX)}catch(a){console.warn("Unrecognized DevSite custom element - DevsiteRecommendations",a)};})(_ds_www);
