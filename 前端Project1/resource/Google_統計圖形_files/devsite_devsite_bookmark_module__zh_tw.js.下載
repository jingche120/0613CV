(function(_ds){var window=this;var ON=function(){return(0,_ds.R)('<input type="checkbox" class="bookmark-checkbox">')},PN=function(a){var b=a.isSignedIn;a=a.gb;let c='<devsite-dialog class="devsite-bookmark-dialog" id="devsite-bookmark-dialog"><div class="devsite-dialog-contents">';a&&(c+='<h3 class="no-link">',c=(b?c+"\u5efa\u7acb Google \u958b\u767c\u4eba\u54e1\u8a2d\u5b9a\u6a94\u4ee5\u52a0\u5165\u66f8\u7c64":c+"\u767b\u5165\u5e33\u6236\u5373\u53ef\u5c07\u7db2\u9801\u52a0\u5165\u66f8\u7c64")+"</h3>");c+="<p>";c=(b?a?c+"\u5229\u7528 Google \u958b\u767c\u4eba\u54e1\u8a2d\u5b9a\u6a94\u5132\u5b58\u5e38\u7528\u9801\u9762\u3002":
c+'\u9019\u500b\u5e33\u6236\u4e0d\u7b26\u5408\u5efa\u7acb\u958b\u767c\u4eba\u54e1\u8a2d\u5b9a\u6a94\u7684\u8cc7\u683c\u3002<a href="https://developers.google.com/profile/help#i%E2%80%99m_unable_to_create_a_profile_with_my_g_suite_account_why_is_that" target="_blank">\u77ad\u89e3\u8a73\u60c5</a>':c+"\u4f60\u5fc5\u9808\u767b\u5165\u5e33\u6236\uff0c\u624d\u80fd\u900f\u904e Google \u958b\u767c\u4eba\u54e1\u8a2d\u5b9a\u6a94\u5132\u5b58\u7d93\u5e38\u9020\u8a2a\u7684\u7db2\u9801\u3002")+"</p>";b&&a&&(c+=
"<p>\u5efa\u7acb Google \u958b\u767c\u4eba\u54e1\u8a2d\u5b9a\u6a94\u3002</p>");c+='</div><div class="devsite-dialog-buttons">';c=b?a?c+'<button class="button-primary create-profile">\u5efa\u7acb\u8a2d\u5b9a\u6a94':c+'<button class="button-primary change-account">\u8b8a\u66f4\u5e33\u6236':c+'<button class="button button-primary sign-in-button">\u767b\u5165';return(0,_ds.R)(c+'</button><button class="button devsite-dialog-close">\u95dc\u9589</button></div></devsite-dialog>')},QN=function(a){var b=a.fb;
a='<devsite-dialog class="devsite-bookmark-dialog" id="devsite-bookmark-create-profile-dialog"><div class="create-profile-spinner"><devsite-spinner size="48"></devsite-spinner></div><div class="devsite-dialog-contents"><h3 class="no-link">\u4f60\u5e0c\u671b\u6536\u5230\u96fb\u5b50\u90f5\u4ef6\u55ce\uff1f\u53ef\u4ee5\u85c9\u6b64\u53d6\u5f97\u8207\u65b0\u529f\u80fd\u3001\u6d3b\u52d5\u3001\u5fbd\u7ae0\u3001\u5167\u5bb9\u548c\u7814\u7a76\u6a5f\u6703\u76f8\u95dc\u7684\u8cc7\u8a0a\u3002</h3><input type="checkbox" id="devsite-bookmark-create-profile-email-opt-in"><label for="devsite-bookmark-create-profile-email-opt-in">\u662f\uff0c\u6211\u8981\u8a02\u95b1 Google Developers \u96fb\u5b50\u90f5\u4ef6\u3002</label><p class="account-note">';
b='\u5efa\u7acb\u958b\u767c\u4eba\u54e1\u8a2d\u5b9a\u6a94\u5373\u8868\u793a\u540c\u610f\u300a<a href="'+(_ds.W(_ds.X(b))+'">\u5167\u5bb9\u653f\u7b56</a>\u300b\u3002\u4f7f\u7528\u9019\u9805\u670d\u52d9\u6642\u5fc5\u9808\u9075\u5b88 Google \u7684\u300a<a href="https://policies.google.com/terms">\u670d\u52d9\u689d\u6b3e</a>\u300b\u53ca\u300a<a href="https://policies.google.com/privacy">\u96b1\u79c1\u6b0a\u653f\u7b56</a>\u300b\u3002Google \u958b\u767c\u4eba\u54e1\u8a2d\u5b9a\u6a94\u6703\u6cbf\u7528\u4f60\u7684 Google \u5e33\u6236\u540d\u7a31\u3002\u9019\u500b\u540d\u7a31\u53ef\u80fd\u6703\u4f34\u96a8\u4f60\u63d0\u4f9b\u7684\u5167\u5bb9\u986f\u793a\uff0c\u800c\u4f60\u96a8\u6642\u53ef\u4ee5\u8b8a\u66f4\u3002');
a=a+b+'</p></div><div class="devsite-dialog-buttons"><button class="button-primary create-profile">\u5efa\u7acb\u8a2d\u5b9a\u6a94';a+='</button><button class="button devsite-dialog-close">';a+="\u95dc\u9589";a+="</button></div></devsite-dialog>";return(0,_ds.R)(a)},RN=function(a){a='<devsite-dialog class="devsite-bookmark-dialog" id="devsite-bookmark-error-dialog"><div class="devsite-dialog-contents"><h3 class="no-link">\u767c\u751f\u932f\u8aa4</h3><p>'+(_ds.S(a.error)+'</p></div><div class="devsite-dialog-buttons"><button class="button devsite-dialog-close">');
return(0,_ds.R)(a+"\u95dc\u9589</button></div></devsite-dialog>")};var TN=async function(a){var b=new _ds.xi(_ds.H().href);if(_ds.Qi(b.h,"bookmark"))await SN(a),b.h.remove("bookmark"),_ds.Xi(b.toString(),!0,!1);else if(await (await _ds.x()).isSignedIn()){var c=await a.W();if(null!=c&&c.profileId){b=_ds.H().href;try{b=await _ds.mo(b)}catch(e){}c=(null==c?void 0:c.profileId)||"";var d=new _ds.eq;try{let e;"SAVED"===(null==(e=await d.getPath({path:b,profileId:c}))?void 0:e.saveStatus)&&a.setAttribute("saved","")}catch(e){}}}},UN=function(a){if(a.C){var b=(a.C.checked=
a.v)?"\u79fb\u9664\u66f8\u7c64":"\u65b0\u589e\u66f8\u7c64";a.setAttribute("data-title",b);var c;null==(c=a.C)||c.setAttribute("aria-label",b)}},VN=function(a){a.eventHandler.listen(a,"change",()=>{SN(a)})},SN=async function(a){a.toggleAttribute("saved");if(a.v){var b=await _ds.fo("/saved-pages",void 0,void 0,!1,!0);WN(a,"\u5df2\u5132\u5b58\u9801\u9762\u3002","\u8acb\u67e5\u770b\u300c\u5132\u5b58\u7684\u9801\u9762\u300d",b)}else WN(a,"\u5df2\u53d6\u6d88\u5132\u5b58\u9801\u9762\u3002");b=await (await _ds.x()).isSignedIn();
let c=!0;b&&(c=await a.gb());if(c){const d=await a.W();if(d){await XN(a,d);return}}a.F=YN(a,b,c);a.F.setAttribute("open","")},WN=function(a,b,c,d){a.dispatchEvent(new CustomEvent("devsite-show-custom-snackbar-msg",{detail:{msg:b,linkText:c,href:null==d?void 0:d.href,showClose:!1},bubbles:!0}))},XN=async function(a,b){if(null==b||!b.profileId)return null;var c=a.v?"SAVED":"UNSAVED";let d=_ds.H().href;try{d=await _ds.mo(d)}catch(g){}const e=new _ds.eq;let f=null;try{f=await e.Kd({path:d,status:c,profileId:b.profileId})}catch(g){a.j=
ZN(a,"\u5132\u5b58\u7db2\u9801\u6642\u767c\u751f\u554f\u984c\u3002"),a.j.setAttribute("open",""),a.toggleAttribute("saved")}a.dispatchEvent(new CustomEvent("devsite-analytics-observation",{detail:{category:"Site-Wide Custom Events",action:a.v?"Saving Page to Profile":"Removing Saved Page from Profile",label:"Saving Widget"},bubbles:!0}));c=document.querySelector("devsite-user#devsite-user");b=await _ds.fo("/saved-pages",null==b?void 0:b.profileId,null==b?void 0:b.vanityId,!1,!0);a.v&&!window.sessionStorage.getItem("devsite_bookmark_popout_shown")&&
(await (null==c?void 0:c.Pd("view-bookmarked-pages",b)),window.sessionStorage.setItem("devsite_bookmark_popout_shown","true"));return f},YN=function(a,b,c){!b&&c&&$N(a,"Callout Profile intro");let d=document.body.querySelector("#devsite-bookmark-dialog");d||(d=_ds.N(PN,{isSignedIn:b,gb:c}),document.body.appendChild(d),(b=d.querySelector(".create-profile"))&&a.eventHandler.listen(b,"click",async()=>{let e;null==(e=d)||e.removeAttribute("open");a.h=await aO(a);a.h.setAttribute("open","")}),(b=d.querySelector(".sign-in-button"))&&
a.eventHandler.listen(b,"click",async e=>{e.preventDefault();e.stopPropagation();e=new _ds.xi(_ds.H().href);e.h.add("bookmark",!0);_ds.Xi(e.toString(),!0,!1);await (await _ds.x()).signIn()}),(b=d.querySelector(".change-account"))&&a.eventHandler.listen(b,"click",async e=>{e.preventDefault();e.stopPropagation();e=new _ds.xi(_ds.H().href);e.h.add("bookmark",!0);_ds.Xi(e.toString(),!0,!1);await (await _ds.x()).changeAccount()}),(b=d.querySelector(".devsite-dialog-close"))&&a.eventHandler.listen(b,"click",
()=>{a.toggleAttribute("saved");$N(a,"Callout Profile dismissed")}));return d},$N=function(a,b,c){b=Object.assign({},{category:"Site-Wide Custom Events",action:b,label:"Saving Widget Callout"},c||{});a.dispatchEvent(new CustomEvent("devsite-analytics-observation",{detail:b,bubbles:!0}))},aO=async function(a){$N(a,"Callout Profile displayed");var b=document.body.querySelector("#devsite-bookmark-create-profile-dialog");if(!b){b=(await _ds.co()).href;b=_ds.N(QN,{fb:b});document.body.appendChild(b);var c=
b.querySelector(".create-profile");c&&a.eventHandler.listen(c,"click",()=>{a.createProfile()});(c=b.querySelector(".devsite-dialog-close"))&&a.eventHandler.listen(c,"click",()=>{a.toggleAttribute("saved");$N(a,"Callout Profile dismissed")})}return b},ZN=function(a,b){$N(a,"Callout Profile error",{label:"Saving Widget Callout Error"});a=document.body.querySelector("#devsite-bookmark-error-dialog");a||(a=_ds.N(RN,{error:b}),document.body.appendChild(a));return a},bO=class extends _ds.G{constructor(){super(["devsite-snackbar",
"devsite-dialog"]);this.eventHandler=new _ds.I;this.j=this.h=this.F=this.C=this.D=null;this.v=!1}static get observedAttributes(){return["saved"]}async connectedCallback(){const a=document.body.querySelector(".devsite-page-title,.devsite-playlist-title,.devsite-quiz-title,[layout=docs] .devsite-article h1:first-of-type");if(a)if(a&&this.previousElementSibling!==a){let c;null==(c=a.parentElement)||c.insertBefore(this,a.nextSibling)}else{this.classList.add("show");await TN(this);_ds.M(this,ON);this.D=
document.body.querySelector(".devsite-article");var b;null==(b=this.D)||b.setAttribute("has-bookmark","");this.C=this.querySelector(".bookmark-checkbox");UN(this);VN(this)}else this.remove()}disconnectedCallback(){_ds.J(this.eventHandler);_ds.Sh(this.F);_ds.Sh(this.h);_ds.Sh(this.j);this.C=null;let a;null==(a=this.D)||a.removeAttribute("has-bookmark")}attributeChangedCallback(a,b,c){"saved"===a&&(this.v=null!==c,UN(this))}async createProfile(){var a=await _ds.JG.getName();if(a){var b,c=null==(b=this.h)?
void 0:b.querySelector("#devsite-bookmark-create-profile-email-opt-in");b=!(!c||!c.checked);var d;null==(d=this.h)||d.classList.add("loading");c=new _ds.Xw;d=null;try{await _ds.Uw(c,a,b,!0);let f;null==(f=this.h)||f.removeAttribute("open");d=await this.W();a=null;d&&(a=await XN(this,d));$N(this,"Callout Profile created",a&&"SAVED"===a.saveStatus?{ou:"1",Rt:a.type||"UNDEFINED_TYPE"}:void 0)}catch(f){let g;null==(g=this.h)||g.removeAttribute("open");this.j=ZN(this,`${f}`);this.j.setAttribute("open",
"");this.toggleAttribute("saved")}var e;null==(e=this.h)||e.classList.remove("loading")}else null==(c=this.h)||c.removeAttribute("open"),this.j=ZN(this,"\u53d6\u5f97\u5e33\u6236\u8cc7\u8a0a\u6642\u767c\u751f\u554f\u984c\u3002"),this.j.setAttribute("open",""),this.toggleAttribute("saved")}async gb(){if(!await (await _ds.x()).isSignedIn())return!1;const a=new _ds.Nw;let b=null;try{b=await a.Qa()}catch(e){}let c,d;return"ELIGIBILITY_ELIGIBLE"===(null==(c=b)?void 0:null==(d=c.createProfile)?void 0:d.status)}async W(){if(!await this.gb())return null;
const a=new _ds.Xw;let b=null;try{b=await a.W()}catch(c){}return b}};try{window.customElements.define("devsite-bookmark",bO)}catch(a){console.warn("Unrecognized DevSite custom element - DevsiteBookmark",a)};})(_ds_www);
